<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="topic"/>
<meta name="DC.Title" content="Low-Power API"/>
<meta name="DC.Relation" scheme="URI" content="GUID-B5E40757-7B10-4239-AF8C-A23EDB0DE4DA.html"/>
<meta name="prodname" content=""/>
<meta name="version" content="1"/>
<meta name="release" content="0"/>
<meta name="modification" content="0"/>
<meta name="DC.Creator" content="NXP Semiconductors"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-BE61D995-2834-45C2-B051-9C9D5650CD46"/>
<meta name="DC.Language" content="en-us"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Low-Power API</title>
</head>
<body id="GUID-BE61D995-2834-45C2-B051-9C9D5650CD46">


    <h1 class="title topictitle1">Low-Power API</h1>

    <div class="body">
        <div class="section" id="GUID-BE61D995-2834-45C2-B051-9C9D5650CD46__GUID-1B4B0484-4DC0-4C83-A6D4-F3320A181597"><strong class="ph b">Configuration Macros</strong>
            <p class="p"><strong class="ph b">Name</strong>
            </p>
<pre class="pre codeblock">#define cPWR_UsePowerDownMode TRUE</pre>

            <strong class="ph b">Description</strong>
            <p class="p">Enables/disables low-power-related code and variables. </p>
<p class="p"><strong class="ph b">Location</strong>
            </p>
<p class="p">Cm0p\PWR_Configuration.h </p>
<p class="p">Cm4\PWR_Configuration.h
                </p>
<p class="p"> </p>
<p class="p"><strong class="ph b">Name</strong>
            </p>
<pre class="pre codeblock">#define cPWR_DeepSleepMode 4</pre>
<p class="p"><strong class="ph b">Description</strong>
            </p>
<p class="p">Configures default deep sleep mode. </p>
<p class="p"><strong class="ph b">Location</strong>
            </p>
<p class="p">Cm0p\PWR_Configuration.h </p>
<p class="p">Cm4\PWR_Configuration.h </p>

            <p class="p"><strong class="ph b">Name</strong>
            </p>
<pre class="pre codeblock">#define cPWR_EnableDeepSleepMode_1 1
#define cPWR_EnableDeepSleepMode_2 1
#define cPWR_EnableDeepSleepMode_3 1
#define cPWR_EnableDeepSleepMode_4 1
#define cPWR_EnableDeepSleepMode_5 1
#define cPWR_EnableDeepSleepMode_6 1
#define cPWR_EnableDeepSleepMode_7 1 </pre>
<strong class="ph b">Description</strong>
            <p class="p">These defines were provided to save code size. If a particular deep sleep
                mode is not used, the corresponding define can be set to 0, causing it to be
                excluded from the build. To maintain compatibility with other low-power components,
                the PWR_EnterPowerOff(void) function was kept, but, in this implementation, it puts
                the system in the lowest power mode possible, which is mode 4. Be aware that
                disabling mode 4 (cPWR_EnableDeepSleepMode_4 = 0), puts this function in an infinite
                loop.</p>
<strong class="ph b">Location</strong>
            <p class="p">Cm0p\PWR_Configuration.h </p>
<p class="p">Cm4\PWR_Configuration.h</p>

            <p class="p"><strong class="ph b">Name</strong>
            </p>
<pre class="pre codeblock">#define cPWR_DeepSleepDurationMs 30000</pre>

            <strong class="ph b">Description</strong>
            <p class="p">Configures default deep sleep duration. It only has meaning for deep
                sleep modes 1, 2, 3, 6 and 7.</p>
<strong class="ph b">Location</strong>
            <p class="p">Cm0p\PWR_Configuration.h </p>
<p class="p">Cm4\PWR_Configuration.h</p>

        </div>

        <div class="section" id="GUID-BE61D995-2834-45C2-B051-9C9D5650CD46__GUID-F1C21FE1-D064-497F-B68A-A9341DFC51BE"><strong class="ph b">Name</strong>
            <pre class="pre codeblock">#define cPWR_BLE_LL_Enable FALSE</pre>

            <strong class="ph b">Description</strong>
            <p class="p">Enables/disables BLE Link Layer Deep Sleep Mode functionalities. It is a connectivity
                core specific define.</p>
<strong class="ph b">Location</strong>
            <p class="p">Cm0p\PWR_Configuration.h</p>

            <p class="p"><strong class="ph b">Name</strong>
            </p>
<pre class="pre codeblock">#define cPWR_GENFSK_LL_Enable FALSE</pre>
<strong class="ph b">Description</strong>
            <p class="p">Enables/disables GenFSK Link Layer Deep Sleep Mode functionalities. It is a
                connectivity core specific define.</p>
<strong class="ph b">Location</strong>
            <p class="p">Cm0p\PWR_Configuration.h</p>
<p class="p"/>
<p class="p"><strong class="ph b">Name</strong>
            </p>
<pre class="pre codeblock">#define cPWR_Z_LL_Enable FALSE</pre>

            <p class="p"><strong class="ph b">Description</strong></p>
Enables/disables Z_LL functionalities. None of these
            functionalities are currently implemented and these defines do not have any effect. It
            is a connectivity core specific define.
                <p class="p"><strong class="ph b">Location</strong></p>
<p class="p">Cm0p\PWR_Configuration.h</p>

            <p class="p"><strong class="ph b">Name</strong>
            </p>
<pre class="pre codeblock">#define cPWR_Zigbee_Enable FALSE</pre>
<strong class="ph b">Description</strong>
            <p class="p">This define enables/disables some legacy ZigBee stack-related checks before entering
                low-power. Do not enable it unless you have the legacy Zigbee stack running on this
                device. It is a connectivity core specific define.</p>
<strong class="ph b">Location</strong>
            <p class="p">Cm0p\PWR_Configuration.h</p>

            <p class="p"><strong class="ph b">Name</strong>
            </p>
<pre class="pre codeblock">#define cPWR_BLE_LL_OffsetToWakeupInstant (3)</pre>
<strong class="ph b">Description</strong>
            <p class="p">Number of slots (625 us) when the BLE Link Layer hardware needs to exit from deep
                sleep mode before the BLE reference clock register reaches the wake-up instant
                register. It is a connectivity core specific define.</p>
<strong class="ph b">Location</strong>
            <p class="p">Cm0p\PWR_Configurations.h</p>

            <p class="p"><strong class="ph b">Name</strong>
            </p>
<pre class="pre codeblock">#define cPWR_BLE_LL_OscStartupDelay (0x23)</pre>

            <strong class="ph b">Description</strong>
            <p class="p">The period that the BLE Link Layer must wait after a system clock request to ensure
                the oscillator is running and is stable. It is a connectivity core specific
                define.</p>
This is in X.Y format where X is in terms of number of BT slots (625 us)
            and Y is in terms of number of clock periods of 16 kHz clock input, required for the RF
            oscillator to stabilize the clock output after the oscillator is turned ON. In this
            period, the clock is assumed to be unstable and the controller does not turn on the
            clock to internal logic until this period is over. This means that the wake up from deep
            sleep mode must account for the delay before the wakeup instant.
                <p class="p">Osc_startup_delay[11:5] is number of slots (625 us)</p>
 Osc_startup_delay[4:0 ]
            is number of clock periods of 16 kHz clock <p class="p">(Warning: Maximum value of
                Osc_startup_delay [4:0] supported is 9. Therefore, do not program value greater than
                9).</p>
<p class="p"><strong class="ph b">Location</strong></p>
<p class="p">Cm0p\PWR_Configurations.h</p>

            <p class="p"><strong class="ph b">Name</strong>
            </p>
<pre class="pre codeblock">#define cPWR_BLEAutoDSMEn FALSE</pre>
<strong class="ph b">Description</strong>
            <p class="p">Enable/disable the BLE Auto DSM feature. It is a connectivity core specific
                define.</p>
If enabled, low power mode 1 uses Auto DSM feature so cm0+ exits LLS only
            after a BLE event that requires MCU intervention occurs. If disabled, low power mode 1
            uses classic DSM feature so cm0+ exits LLS before any BLE event and the low power mode
            is switched to 6(STOP) after LLS exit. <p class="p"><strong class="ph b">Location</strong>
            </p>
<p class="p">Cm0p\PWR_Configurations.h</p>

            <p class="p"><strong class="ph b">Name</strong>
            </p>
<pre class="pre codeblock">#define cPWR_CheckLowPowerTimers FALSE</pre>

            <strong class="ph b">Description</strong>
            <p class="p">If enabled, the Low-Power module searches for the first Low-Power-Timer to expire and
                sets up the sleep duration as the minimum between the low-power timer time-out value
                and the requested sleep duration. </p>
<p class="p"><strong class="ph b">Location</strong>
            </p>
<p class="p">Cm0p\PWR_Configurations.h </p>
<p class="p">Cm4\PWR_Configurations.h</p>

            <p class="p"><strong class="ph b">Name</strong>
            </p>
<pre class="pre codeblock">#define gAllowDeviceToSleep_c 0</pre>
<p class="p"><strong class="ph b">Description</strong></p>
<p class="p">Functions
                PWR_AllowDeviceToSleep/PWR_DisallowDeviceToSleep decrement/increment a global
                variable. When variable value is 0, the system is allowed to enter low-power. This
                define sets the initial value of this variable.</p>
<strong class="ph b">Location</strong>
            <p class="p">Cm0p\PWR_Interface.h </p>
<p class="p">Cm4\PWR_Interface.h</p>
</div>

        <div class="section" id="GUID-BE61D995-2834-45C2-B051-9C9D5650CD46__GUID-B611CAB5-17B5-4020-B4D8-803B57802969">
            <strong class="ph b">Data type definitions</strong>
            <p class="p"><strong class="ph b">Name</strong></p>
<pre class="pre codeblock">typedef union {
uint8_t AllBits;
struct {
uint8_t FromReset :1; 
uint8_t FromPSwitch_UART :1;
uint8_t FromKeyBoard :1;
uint8_t FromLPTMR :1;
uint8_t FromRadio :1;
uint8_t FromOtherCore :1;
uint8_t DeepSleepTimeout :1;
uint8_t SleepTimeout :1;
} Bits;
} PWRLib_WakeupReason_t;</pre>

            <p class="p"><strong class="ph b">Description</strong>
            </p>
<p class="p">The data type above defines a bitmap created to identify the wakeup source. The
                function PWR_EnterLowPower() returns a value of this type for the low-power modes
                other than 4 and 5 (the system exits these modes through reset sequence). A global
                variable of this type (extern volatile PWRLib_WakeupReason_t
                PWRLib_MCU_WakeupReason;) is also updated at wakeup. For mode 4 and 5, the global
                variable is updated at PWR_Init call. If the system exits low-power by LPTMR
                (FromLPTMR =1), the DeepSleepTimeout is also set. SleepTimeout is set when the
                system exits sleep (the system couldn’t manage to enter deep sleep because a
                non-low-power timer was running).</p>
<p class="p"><strong class="ph b">Location</strong>
            </p>
<p class="p">Cm0p\PWR_Interface.h </p>
<p class="p">Cm4\PWR_Interface.h</p>

            <p class="p"><strong class="ph b">Name</strong>
            </p>
<pre class="pre codeblock">typedef void ( *pfPWRCallBack_t ) ( void);</pre>
<strong class="ph b">Description</strong>
            <p class="p">Data type above defines a pointer to a callback function, which is going to be called
                from the low-power module. Functions of this type are registered in the low-power
                module using two functions described in the primitive’s
                    section.</p>
<p class="p"><strong class="ph b">Location</strong></p>
Cm0p\PWR_Interface.h
                <p class="p">Cm4\PWR_Interface.h</p>
</div>

    </div>

<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="GUID-B5E40757-7B10-4239-AF8C-A23EDB0DE4DA.html">Kinetis Wireless Multi-Mode (Bluetooth LE/IEEE® 802.15.4/Generic FSK) Dual Core Microcontrollers Low-power Library Overview</a></div>
</div>
</div>

</body>
</html>